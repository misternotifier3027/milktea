(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[41],{5388:function(e,t,s){Promise.resolve().then(s.bind(s,9188))},9188:function(e,t,s){"use strict";s.r(t);var i=s(7437),l=s(6648),a=s(2265),n=s(4971),r=s(6463);t.default=()=>{let e=(0,r.useParams)(),t=(0,r.useRouter)(),[s,d]=(0,a.useState)(null),[o,c]=(0,a.useState)(null),[u,m]=(0,a.useState)(!0),[p,h]=(0,a.useState)({idProduct:0,size:null,name:"",topping:[],quantity:0,total:0,note:""}),[x,f]=(0,a.useState)(null),{card:g,updateCard:v}=(0,a.useContext)(n.H),[j,w]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=async()=>{let e=await fetch("/api/topping/all");e.ok&&c(await e.json())},t=async()=>{let e=await fetch("/api/other-custom");e.ok&&f((await e.json()).data)};o||x||(e(),t())},[]),(0,a.useEffect)(()=>{let t=async()=>{let t=e.id[0].slice(6);m(!0);let s=await fetch("/api/product/"+t);if(s.ok){let i=await s.json();if(d(i),e.id[1]&&g.length>0){let s=g[e.id[1]],i=s.note.split(", "),l=i.slice(0,i.length-x.length).join(", ");w(i.slice(i.length-x.length)),h({...p,idProduct:t,name:s.name,quantity:s.quantity,total:s.total,image:s.image,size:s.size,topping:s.topping,note:l})}else w([]),h({...p,idProduct:t,total:i.price,quantity:1,name:i.name,image:i.image,size:i.productSizes[0],topping:[],note:""})}};e.id[0]&&g&&x&&t()},[e.id,g,x]),(0,a.useEffect)(()=>{null!=s&&0!=p.quantity&&null!=o&&null!=j&&m(!1)},[p.quantity,s,o,j]),(0,a.useEffect)(()=>{if(p.size){let e=(p.size.price+p.topping.reduce((e,t)=>e+t.price*t.quantity,0))*p.quantity;h({...p,total:e})}},[p.size,p.topping,p.quantity]);let b=e=>{let t=e.toString().split("").reverse().join(""),s="";for(let e=0;e<t.length;e++)s+=t[e],(e+1)%3==0&&e+1!==t.length&&(s+=".");return s.split("").reverse().join("")+" đ"};return u?(0,i.jsx)("div",{class:"flex items-center justify-center h-screen",children:(0,i.jsxs)("div",{class:"relative",children:[(0,i.jsx)("div",{class:"h-24 w-24 rounded-full border-t-8 border-b-8 border-gray-200"}),(0,i.jsx)("div",{class:"absolute top-0 left-0 h-24 w-24 rounded-full border-t-8 border-b-8 border-blue-500 animate-spin"})]})}):(0,i.jsx)("div",{tabindex:"-1",className:" bg-white overflow-hidden md:max-h-screen transition-opacity duration-300 animate-zoom-in md:p-6",children:(0,i.jsxs)("div",{className:"relative w-full ",children:[(0,i.jsx)("button",{onClick:()=>t.push("/"),type:"button",className:"absolute z-30 bg-bodydark top-2 p-1 left-2 text-white rounded-full w-8 h-8 ml-auto inline-flex justify-center items-center",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-5",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M7.72 12.53a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 1 1 1.06 1.06L9.31 12l6.97 6.97a.75.75 0 1 1-1.06 1.06l-7.5-7.5Z",clipRule:"evenodd"})})}),(0,i.jsxs)("div",{className:"mx-auto w-full flex md:flex-row flex-col gap-5",children:[(0,i.jsx)("div",{className:"w-full md:rounded-xl flex justify-end",children:(0,i.jsx)(l.default,{className:"md:w-125 w-full md:h-[95vh] my-auto aspect-4/3 object-cover md:rounded-xl",src:s.image,width:400,height:800})}),(0,i.jsxs)("div",{className:"w-full relative px-5 md:px-0 overflow-hidden",children:[(0,i.jsxs)("div",{className:"overflow-y-auto md:h-[95vh] xl:w-3/5 lg:w-4/5 w-full px-2 pb-30",children:[(0,i.jsxs)("div",{className:"",children:[(0,i.jsx)("div",{className:"uppercase md:text-2xl text-xl font-semibold",children:s.name}),(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsx)("span",{className:"font-semibold uppercase text-lg",children:"Size "}),(0,i.jsx)("span",{children:"- Chọn 1"})]}),(0,i.jsx)("div",{className:"grid md:grid-cols-2 grid-cols-1 mt-5 gap-4",children:s.productSizes.map((e,t)=>(0,i.jsx)("div",{className:"w-full",children:(0,i.jsxs)("label",{className:"cursor-pointer w-full ",children:[(0,i.jsx)("input",{defaultChecked:p.size.id==e.id,type:"radio",className:"peer sr-only",name:"size",onChange:t=>h({...p,size:e})}),(0,i.jsx)("div",{className:"select-none rounded-md bg-white px-3 py-2 text-gray-600 ring-2 ring-transparent transition-all hover:shadow peer-checked:text-amber-500 peer-checked:ring-amber-500 peer-checked:ring-2",children:(0,i.jsxs)("div",{className:"flex gap-3 w-full",children:[(0,i.jsx)("div",{className:"flex items-center",children:(0,i.jsx)("div",{children:(0,i.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{fill:"currentColor",d:"m10.6 13.8l-2.175-2.175q-.275-.275-.675-.275t-.7.3q-.275.275-.275.7q0 .425.275.7L9.9 15.9q.275.275.7.275q.425 0 .7-.275l5.675-5.675q.275-.275.275-.675t-.3-.7q-.275-.275-.7-.275q-.425 0-.7.275ZM12 22q-2.075 0-3.9-.788q-1.825-.787-3.175-2.137q-1.35-1.35-2.137-3.175Q2 14.075 2 12t.788-3.9q.787-1.825 2.137-3.175q1.35-1.35 3.175-2.138Q9.925 2 12 2t3.9.787q1.825.788 3.175 2.138q1.35 1.35 2.137 3.175Q22 9.925 22 12t-.788 3.9q-.787 1.825-2.137 3.175q-1.35 1.35-3.175 2.137Q14.075 22 12 22Z"})})})}),(0,i.jsxs)("div",{className:"flex md:flex-col flex-row justify-between w-full items-center md:items-start",children:[(0,i.jsx)("p",{className:"text-sm font-semibold uppercase text-gray-500",children:e.name}),(0,i.jsx)("p",{className:"text-sm font-bold",children:b(e.price)})]})]})})]})},t))})]}),(0,i.jsxs)("div",{className:"mt-5",children:[(0,i.jsx)("div",{className:"",children:(0,i.jsx)("span",{className:"font-semibold uppercase text-lg",children:"Topping"})}),(0,i.jsx)("div",{className:"grid md:grid-cols-2 grid-cols-1 mt-5 md:gap-4",children:o.map((e,t)=>{var s;return(0,i.jsxs)("div",{className:"flex items-center justify-around select-none ".concat(t!=o.length-1?"border-b border-bodydark md:border-none":"","  py-3 md:py-0"),children:[(0,i.jsxs)("div",{onClick:()=>{if(p.topping.find(t=>t.id==e.id)){let t=p.topping.filter(t=>(t.id==e.id&&(t.quantity+=1),t));h({...p,topping:t})}else h({...p,topping:[...p.topping,{id:e.id,quantity:1,name:e.name,price:e.price}]})},className:"cursor-pointer w-full flex gap-3 items-center",children:[(0,i.jsx)("div",{className:"size-6 border-2 text-white flex justify-center items-center font-semibold border-bodydark rounded-md ".concat(p.topping.find(t=>t.id==e.id)?"bg-amber-500 border-amber-500":""),children:(0,i.jsx)("div",{children:null===(s=p.topping.find(t=>t.id===e.id))||void 0===s?void 0:s.quantity})}),(0,i.jsxs)("div",{className:"flex md:flex-col flex-row gap-5 md:gap-0 justify-between w-full md:w-fit",children:[(0,i.jsx)("p",{className:" text-gray-500",children:e.name}),(0,i.jsx)("p",{className:" ",children:b(e.price)})]})]}),p.topping.find(t=>t.id==e.id)&&(0,i.jsx)("div",{className:"cursor-pointer mx-4 hover:text-red",onClick:()=>{h({...p,topping:p.topping.filter(t=>t.id!=e.id)})},children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})})})]},t)})})]}),x&&x.map((e,t)=>(0,i.jsxs)("div",{className:"mt-5 custom w-full",children:[(0,i.jsx)("div",{className:"",children:(0,i.jsx)("span",{className:"font-semibold uppercase text-lg",children:e.name})}),(0,i.jsx)("div",{className:"grid md:grid-cols-2 grid-cols-1 mt-5 gap-4",children:e.data.map((t,s)=>(0,i.jsxs)("label",{className:"flex gap-2 items-center",children:[(0,i.jsx)("input",{defaultChecked:0==j.length?0==s:null!=j.find(s=>s.split(": ")[0]==e.name&&s.split(": ")[1]==t.name),className:"peer sr-only",type:"radio",value:e.name+": "+t.name,name:e.name}),(0,i.jsx)("span",{className:"w-5 h-5 peer-checked:bg-amber-500 peer-checked:border-none border-2 border-body rounded-md",children:" "}),(0,i.jsx)("span",{className:"",children:t.name})]},s))})]},t)),(0,i.jsxs)("div",{className:"mt-10  relative",children:[(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-5 absolute left-1 top-1/2 -translate-y-1/2",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})}),(0,i.jsx)("input",{type:"text",value:p.note,onChange:e=>h({...p,note:e.target.value}),placeholder:"Ghi chú sản phẩm",className:"ps-7 w-full border border-bodydark rounded-md p-3 outline-none"})]})]}),(0,i.jsxs)("div",{className:"flex items-center w-full xl:w-3/5 lg:w-4/5 justify-between md:absolute fixed  bottom-0 left-0 bg-white p-2 border-t border-bodydark1",children:[(0,i.jsx)("div",{className:"flex items-center gap-5",children:(0,i.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,i.jsx)("div",{className:"bg-bodydark rounded-full p-1 text-white cursor-pointer",children:(0,i.jsx)("svg",{onClick:()=>{0==p.quantity?h({...p,quantity:0}):h({...p,quantity:p.quantity-=1})},xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14"})})}),(0,i.jsx)("span",{className:"text-xl text-black",children:p.quantity}),(0,i.jsx)("div",{className:"bg-bodydark rounded-full p-1 text-white cursor-pointer ",children:(0,i.jsx)("svg",{onClick:()=>{h({...p,quantity:p.quantity+=1})},xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})})]})}),(0,i.jsxs)("button",{onClick:()=>{if(m(!0),0!=p.quantity){let t=document.querySelectorAll(".custom"),s=[];t.forEach(e=>{let t=e.querySelector('input[type="radio"]:checked').value;s.push(t)});let i={...p,note:p.note+", "+s.join(", ")};e.id[1]?v(g.map((t,s)=>s==e.id[1]?i:t)):v([...g,i])}else e.id[1]&&v(g.filter((t,s)=>s!=e.id[1]));t.push("/")},className:"w-fit rounded-md bg-amber-500 text-white py-2 px-5 font-semibold",children:["Th\xeam v\xe0o giỏ ",p.total?b(p.total):"0 đ"]})]})]})]})]})})}},4971:function(e,t,s){"use strict";s.d(t,{CardProvider:function(){return n},H:function(){return a}});var i=s(7437),l=s(2265);let a=(0,l.createContext)({card:[],updateCard:()=>{},infoUser:[],updateInfoUser:()=>{}}),n=e=>{let{children:t}=e,[s,n]=(0,l.useState)([]),[r,d]=(0,l.useState)([]);return(0,l.useEffect)(()=>{localStorage.getItem("cardMilktea")&&n(JSON.parse(localStorage.getItem("cardMilktea"))),localStorage.getItem("infoMilktea")&&d(JSON.parse(localStorage.getItem("infoMilktea")))},[]),(0,i.jsx)(a.Provider,{value:{card:s,updateCard:e=>{n(e),localStorage.setItem("cardMilktea",JSON.stringify(e))},infoUser:r,updateInfoUser:e=>{d(e),localStorage.setItem("infoMilktea",JSON.stringify(e))}},children:t})}},6463:function(e,t,s){"use strict";var i=s(1169);s.o(i,"useParams")&&s.d(t,{useParams:function(){return i.useParams}}),s.o(i,"usePathname")&&s.d(t,{usePathname:function(){return i.usePathname}}),s.o(i,"useRouter")&&s.d(t,{useRouter:function(){return i.useRouter}})},291:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return i}});let i=s(9920)._(s(2265)).default.createContext(null)}},function(e){e.O(0,[648,971,23,744],function(){return e(e.s=5388)}),_N_E=e.O()}]);