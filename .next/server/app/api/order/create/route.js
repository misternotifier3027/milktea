"use strict";(()=>{var e={};e.id=703,e.ids=[703],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},20084:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>T,patchFetch:()=>y,requestAsyncStorage:()=>l,routeModule:()=>u,serverHooks:()=>c,staticGenerationAsyncStorage:()=>m});var i={};r.r(i),r.d(i,{POST:()=>p});var a=r(49303),o=r(88716),n=r(60670),d=r(11936);function s(e){let t=e.split("-");return[t[2],t[1],t[0]].join("-")}let p=async e=>{let t=await e.json();try{let e=new Date;if(t.orderTime.includes("H\xf4m nay"))t.orderTime.replace("H\xf4m nay",s(e.toISOString().split("T")[0]));else if(t.orderTime.includes("Ng\xe0y mai")){let r=new Date(e.getTime()+864e5).orderTime.split(",");r[0]=s(e.toISOString().split("T")[0]),t.orderTime=r.join(",")}else if(t.orderTime.includes("Ng\xe0y kia")){let r=new Date(e.getTime()+1728e5).orderTime.split(",");r[0]=s(e.toISOString().split("T")[0]),t.orderTime=r.join(",")}else"asap"==t.orderTime&&(t.orderTime=s(e.toISOString().split("T")[0])+" Sớm nhất c\xf3 thể");let r={name:t.name,phone:t.phone,address:t.address,timeReceive:t.orderTime,type:t.type,paymentMethod:"tienmat"===t.paymentMethod?"Tiền mặt":"Chuyển khoản",paymentStatus:!1,note:t.note,total:t.total,status:0},i=await d.Z.Order.create({data:r});return t.listProduct.forEach(async e=>{let t={idOrder:i.id,idProductSize:e.size.id,quantity:e.quantity,note:e.note},r=await d.Z.OrderItem.create({data:t});e.topping.forEach(async e=>{let t={idOrderItem:r.id,idTopping:e.id,quantity:e.quantity};await d.Z.OrderTopping.create({data:t})})}),new Response("OK",{status:200})}catch(e){return console.log(e),new Response("Error",{status:500})}},u=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/order/create/route",pathname:"/api/order/create",filename:"route",bundlePath:"app/api/order/create/route"},resolvedPagePath:"/www/wwwroot/milktea/app/api/order/create/route.js",nextConfigOutput:"",userland:i}),{requestAsyncStorage:l,staticGenerationAsyncStorage:m,serverHooks:c}=u,T="/api/order/create/route";function y(){return(0,n.patchFetch)({serverHooks:c,staticGenerationAsyncStorage:m})}},11936:(e,t,r)=>{r.d(t,{Z:()=>i});let i=new(require("@prisma/client")).PrismaClient},49303:(e,t,r)=>{e.exports=r(30517)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[948],()=>r(20084));module.exports=i})();